\documentclass[10pt,aspectratio=169]{beamer}
\usepackage{pgfpages}

% ---------------- Support for notes ------------------------------
% Add an empty note to every slide
% https://tex.stackexchange.com/questions/11708/run-macro-on-each-frame-in-beamer
% \setbeameroption{hide notes} % Only slides (default)
% \setbeameroption{show only notes} % Only notes
% \setbeameroption{show notes on second screen=right} % Both
\makeatletter
\def\beamer@framenotesbegin{% at beginning of slide
  \gdef\beamer@noteitems{}%
  \gdef\beamer@notes{{}}% used to be totally empty.
}
\makeatother
% Now, use a pdf reader able to read this:
% -----------------------------------------------------------------
% iOS: Skim: https://gist.github.com/andrejbauer/ac361549ac2186be0cdb
% 1. Generate just the presentation (hide notes) and save to slides.pdf
% 2. Generate onlt the notes (show only nodes) and save to notes.pdf
% 3. With Skim open both slides.pdf and notes.pdf
% 4. Click on slides.pdf to bring it to front.
% 5. In Skim, under "View -> Presentation Option -> Synhcronized Noted Document"
%    select notes.pdf.
% 6. Now as you move around in slides.pdf the notes.pdf file will follow you.
% 7. Arrange windows so that notes.pdf is in full screen mode on your laptop
%    and slides.pdf is in presentation mode on the projector.
% -----------------------------------------------------------------
% Linux: pdfpc: https://tex.stackexchange.com/questions/84622/is-there-a-specialized-pdf-viewer-for-latex-beamer-presentations-on-linux
% example: pdfpc main.pdf --notes=right
% ---------------- End support for notes --------------------------

\graphicspath{{./figures/}{./logos/}}
\usetheme[progressbar=frametitle, sectionpage=none]{metropolis}
\usepackage{appendixnumberbeamer}
\usepackage{siunitx}
\usepackage{framed}
\usepackage{color}
\usepackage{hyperref}
\input{xincludegraphics.tex}
\hypersetup{
colorlinks, urlcolor=blue, linkcolor={blue!10!black},
%citecolor={blue!50!black}
}
%
% metropolis theme: https://github.com/matze/mtheme
%
\mode<presentation>
{
  \usetheme{metropolis}      % or try Darmstadt, Madrid, Warsaw, ...
  %\usecolortheme{default} % or try albatross, beaver, crane, ...
  %\usefonttheme{default}  % or try serif, structurebold, ...
  \setbeamertemplate{navigation symbols}{}
  \setbeamertemplate{caption}[numbered]
} 
\definecolor{kitwaregray}{HTML}{686868}
\definecolor{kitwarelightgray}{HTML}{EEEEEE}
\definecolor{kitwareblue}{HTML}{005F9E}
\definecolor{kitwaregreen}{HTML}{009D49}
\definecolor{kitwarewhite}{HTML}{FFFFFF}
\definecolor{kitwareblack}{HTML}{000000}
\definecolor{shadecolor}{HTML}{EEEEEE}

\setbeamercolor{progress bar}{fg=kitwaregreen}
% Theme colors are derived from these two elements
%\setbeamercolor{alerted text}{fg=}
\setbeamercolor{frametitle}{bg=kitwareblue}
\setbeamercolor{footline}{bg=kitwaregreen}
\setbeamerfont{frame numbering}{size=\small}
\setbeamertemplate{footline}{%
  \begin{beamercolorbox}[wd=\textwidth, sep=1ex]{footline}%
    %\usebeamerfont{page number in head/foot}%
    \usebeamertemplate*{frame footer}
    \hfill%
    \usebeamertemplate*{frame numbering}
  \end{beamercolorbox}%
}
% At the logo on top of the footline.
\addtobeamertemplate{footline}{\hfill\includegraphics[height=0.45cm]{klogo_new_crop}\hspace*{0.5em}\par}{}
%\setbeamertemplate{frame footer}{\includegraphics[width=.1\textwidth]{klogo_new_crop}}


\title{Kitware Beamer Template}
\subtitle{With an optional subtitle}
\date{\today}
\author{Pablo Hernandez-Cerdan\textsuperscript{a}, Other People\textsuperscript{b} and Last Author\textsuperscript{c}}
\institute{\textsuperscript{a} Kitware, Inc.\newline\textsuperscript{b} Dept. of Statistics and Operations Research, UNC\newline\textsuperscript{c} Dept. of Biomedical Engineering, UNC}

\titlegraphic{
\begin{tikzpicture}[overlay, remember picture]
\node[at=(current page.south), anchor=south] {%
\includegraphics[width=.3\textwidth]{klogo}\hspace{2cm} \includegraphics[width=.3\textwidth]{unclogo}
};
\end{tikzpicture}
}
% \titlegraphic{\hfill\includegraphics[height=1.5cm]{logo.pdf}}

\begin{document}

\maketitle

% \begin{frame}{Table of contents}
%   \setbeamertemplate{section in toc}[sections numbered]
%   \tableofcontents[hideallsubsections]
% \end{frame}

\section{Introduction}

\begin{frame}
  \begin{columns}[onlytextwidth]
  \column{0.5\textwidth}
    \includegraphics[width=0.9\textwidth]{./logos/klogo.png}\\
    \vspace{0.1cm}
    % \metroset{block=fill}
    \begin{block}{\color{kitwareblue} Collaborative Software R\&D}
      \begin{itemize}%\itemsep0.2em
        \item Algorithms \& applications
        \item Software process \& infrastructure
        \item Support \& training
        \item Open source leadership
      \end{itemize}
    \end{block}
    \begin{block}{\color{kitwareblue} Supporting industry, government and academia}
    \end{block}
  \column{0.5\textwidth}
    \centering
    \includegraphics[width=0.9\textwidth]{./logos/kitware_pie.png}\\
    \includegraphics[width=0.9\textwidth]{./logos/kitware_itk_slicer_vtk_logos.png}
  \end{columns}

  \note[item]{Intro Kitware:}
\end{frame}

\begin{frame}[fragile]{Introduction}
\begin{itemize} \itemsep1em
\item Just a list

\item B

\item C
\end{itemize}
\end{frame}

\section{Materials}

\begin{frame}[fragile]{Materials}
\begin{columns}[onlytextwidth]
  \column{0.25\textwidth}
    \centering
    \includegraphics[width=0.99\textwidth]{figures/bone_materials_femur_highlight.png}\\
    \vspace{0.5cm}
    \includegraphics[width=0.99\textwidth]{figures/bone_materials_femur_3D.png}
  \column{0.75\textwidth}
    \centering
    \begin{itemize} \itemsep1em
        \item Two Columns.

        \item Internally uses minipage.
    \end{itemize}
\end{columns}
\end{frame}

\begin{frame}{Label images with xincludegraphics}
  \begin{columns}[onlytextwidth]
    \column{0.6\textwidth}
    Ten run-length based-features:
    \begin{itemize}
       \item \textbf{a}) Short run emphasis (SRE) 
       \item \textbf{b}) Long run emphasis (LRE) 
       \item \textbf{c}) Grey level non-uniformity (GLN) 
       \item \textbf{d}) Run length non-uniformity (RLN) 
    \end{itemize}
    \column{0.4\textwidth}
    \begin{columns}
    \centering
    \column{0.5\textwidth}
    \centering
    \xincludegraphics[width=0.9\textwidth, label=a, labelbox]{./TextureMapsImages/GLRLM_49_LEFT_0_crop.png}\\
    \xincludegraphics[width=0.9\textwidth, label=c, labelbox]{./TextureMapsImages/GLRLM_49_LEFT_2_crop.png}
    \column{0.5\textwidth}
    \centering
    \xincludegraphics[width=0.9\textwidth, label=b, labelbox]{./TextureMapsImages/GLRLM_49_LEFT_1_crop.png}\\
    \xincludegraphics[width=0.9\textwidth, label=d, labelbox]{./TextureMapsImages/GLRLM_49_LEFT_3_crop.png}
    \end{columns}
  \end{columns}
\end{frame}

{
\setbeamercolor{background canvas}{bg=kitwarewhite}
\section{Results}
\begin{frame}{Results}
  \centering
  \includegraphics[width=0.7\textwidth]{./figures/features_pcaBoneVSpcaTexture1000Bins.png}\\
  \vspace{0.1cm}
  First principal component of the bone morphometry analysis versus first principal component of the texture analysis.
\end{frame}
}

\section{Conclusion}

{
\setbeamercolor{background canvas}{bg=kitwarewhite}
\begin{frame}{Open Source Development}
  \begin{columns}[onlytextwidth]
    \column{0.80\textwidth}
    \metroset{block=fill}
    \begin{block}{All analysis filters were implemented as part of \textbf{ITK}, the Insight Toolkit:}
    \begin{itemize} \itemsep1.0em
      \item High performance, greatly reducing computational time in texture analysis.
      \item Able to compute 3D maps of multidimensional features
    \end{itemize}
  \end{block}
    \column{0.20\textwidth}
    \centering
    \includegraphics[width=0.8\textwidth]{./logos/logo_ITK.png}
  \end{columns}
  \vspace{0.2cm}
  \begin{columns}[onlytextwidth]
    \column{0.80\textwidth}
    \metroset{block=fill}
    \begin{block}{\textbf{Python} packages available for Windows, Mac and Linux}
    % \noindent \textbf{Python} packages available for Windows, Mac and Linux
      \centering
      pip install itk-texturefeatures itk-bonemorphometry
  \end{block}
    \column{0.20\textwidth}
    \centering
    \includegraphics[width=0.99\textwidth]{./logos/logo_python.png}
  \end{columns}
  \vspace{0.2cm}
  \begin{columns}[onlytextwidth]
    \column{0.80\textwidth}
    \metroset{block=fill}
    \begin{block}{Graphical interface in 3DSlicer: Bone Texture Extension}
    \end{block}
    \column{0.20\textwidth}
    \centering
    \includegraphics[width=0.9\textwidth]{./logos/logo_slicer_horizontal.png}
  \end{columns}
\end{frame}

{
\setbeamercolor{background canvas}{bg=kitwarewhite}
\begin{frame}{Medical Computing}
    \centering
    \includegraphics[height=0.9\textheight]{./logos/kitware_medical.png}
\end{frame}
}

\begin{frame}[standout]
  \centering
  {\huge Thanks!}\\
  pablo.hernandez@kitware.com\\
  kitware@kitware.com
  \vspace{1cm}
  % {\Huge Questions?}\\
\end{frame}

\appendix

{
\setbeamercolor{background canvas}{bg=kitwarewhite}
\begin{frame}[fragile]{Whatever appendix}
  \centering
  \includegraphics[width=0.9\textwidth]{./figures/GLRLM_matrices.png}
\end{frame}
}


\begin{frame}[allowframebreaks]{References}

  \bibliography{references}
  \bibliographystyle{abbrv}

\end{frame}


\end{document}

